<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ajouter un √âv√©nement</title>
    <link rel="stylesheet" href="styles.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    />
  </head>
  <body>
    <section class="container my-5">
      <h2>Ajouter un √âv√©nement</h2>
      <form id="eventForm">
        <div class="mb-3">
          <label for="eventType" class="form-label">Type d'√©v√©nement</label>
          <select class="form-control" id="eventType" required>
            <option value="filter-app">Festivals üé≠</option>
            <option value="filter-product">√âv√©nements üéä</option>
            <option value="filter-branding">Attractions touristiques üè∞</option>
            <option value="filter-books">
              Activit√©s sportives et de plein air üèÑ
            </option>
          </select>
        </div>
        <div class="mb-3">
          <label for="eventTitle" class="form-label"
            >Titre de l'√©v√©nement</label
          >
          <input type="text" class="form-control" id="eventTitle" required />
        </div>
        <div class="mb-3">
          <label for="eventDate" class="form-label">Date de l'√©v√©nement</label>
          <input type="date" class="form-control" id="eventDate" required />
        </div>
        <div class="mb-3">
          <label for="eventDescription" class="form-label"
            >Description courte</label
          >
          <textarea
            class="form-control"
            id="eventDescription"
            rows="2"
            required
          ></textarea>
        </div>
        <div class="mb-3">
          <label for="eventDetailedDescription" class="form-label"
            >Description d√©taill√©e</label
          >
          <textarea
            class="form-control"
            id="eventDetailedDescription"
            rows="4"
            required
          ></textarea>
        </div>
        <div class="mb-3">
          <label for="eventImage" class="form-label">Choisir une image</label>
          <input
            type="file"
            class="form-control"
            id="eventImage"
            accept="image/*"
            required
          />
        </div>
        <button type="submit" class="btn btn-primary">
          Ajouter l'√©v√©nement
        </button>
      </form>
    </section>

    <script>
      document
        .getElementById("eventForm")
        .addEventListener("submit", function (event) {
          event.preventDefault();

          let type = document.getElementById("eventType").value;
          let title = document.getElementById("eventTitle").value;
          let date = document.getElementById("eventDate").value;
          let description = document.getElementById("eventDescription").value;
          let detailedDescription = document.getElementById(
            "eventDetailedDescription"
          ).value;
          let imageInput = document.getElementById("eventImage");

          // V√©rification de l'image
          if (imageInput.files.length === 0) {
            alert("Veuillez t√©l√©charger une image.");
            return;
          }

          const imageFile = imageInput.files[0];
          if (!imageFile.type.startsWith("image/")) {
            alert("Le fichier t√©l√©charg√© n'est pas une image valide.");
            return;
          }

          let imageUrl = URL.createObjectURL(imageFile);

          let eventObj = {
            type,
            title,
            date,
            description,
            detailedDescription,
            imageUrl,
          };
          let events = JSON.parse(localStorage.getItem("events")) || [];
          events.push(eventObj);
          localStorage.setItem("events", JSON.stringify(events));

          document.getElementById("eventForm").reset();
          alert("√âv√©nement ajout√© avec succ√®s !");
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
